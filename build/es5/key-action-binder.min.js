!function e(t,i,n){function o(s,r){if(!i[s]){if(!t[s]){var d="function"==typeof require&&require;if(!r&&d)return d(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){var i=t[s][1][e];return o(i?i:e)},h,h.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){var n=e("./KeyActionBinder"),o=e("./KeyboardActionBinding"),a=e("./GamepadActionBinding"),s=function(){function e(e){this._id=e,this.timeLastActivation=0,this.toleranceTime=0,this.keyboardBindings=[],this.keyboardActivated=!1,this.keyboardValue=0,this.keyboardConsumed=!1,this.gamepadButtonBindings=[],this.gamepadButtonActivated=!1,this.gamepadButtonValue=0,this.gamepadButtonConsumed=!1}return e.prototype.bind=function(e,t){return"number"==typeof e?this.bindKeyboard(e,void 0==t?n["default"].KeyLocations.ANY:t):this.bindGamepad(e,void 0==t?n["default"].GamepadLocations.ANY:t),this},e.prototype.setTolerance=function(e){return this.toleranceTime=1e3*e,this},e.prototype.consume=function(){this.keyboardActivated&&(this.keyboardConsumed=!0),this.gamepadButtonActivated&&(this.gamepadButtonConsumed=!0)},e.prototype.interpretKeyDown=function(e,t){for(var i=0;i<this.keyboardBindings.length;i++)!this.keyboardBindings[i].isActivated&&this.keyboardBindings[i].matchesKeyboardKey(e,t)&&(this.keyboardBindings[i].isActivated=!0,this.keyboardActivated=!0,this.keyboardValue=1,this.timeLastActivation=Date.now())},e.prototype.interpretKeyUp=function(e,t){for(var i,n=!1,o=0;o<this.keyboardBindings.length;o++)this.keyboardBindings[o].matchesKeyboardKey(e,t)&&(this.keyboardBindings[o].isActivated&&(this.keyboardBindings[o].isActivated=!1),i=!0,n=n||this.keyboardBindings[o].isActivated);i&&(this.keyboardActivated=n,this.keyboardValue=this.keyboardActivated?1:0,this.keyboardActivated||(this.keyboardConsumed=!1))},e.prototype.interpretGamepadButton=function(e,t,i,n){for(var o,a=!1,s=0,r=0;r<this.gamepadButtonBindings.length;r++)this.gamepadButtonBindings[r].matchesGamepadButton(e,t)&&(o=!0,this.gamepadButtonBindings[r].isActivated=i,this.gamepadButtonBindings[r].value=n,a=a||i,n>s&&(s=n));o&&(a&&!this.gamepadButtonActivated&&(this.timeLastActivation=Date.now()),this.gamepadButtonActivated=a,this.gamepadButtonValue=s,this.gamepadButtonActivated||(this.gamepadButtonConsumed=!1))},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activated",{get:function(){return(this.keyboardActivated&&!this.keyboardConsumed||this.gamepadButtonActivated&&!this.gamepadButtonConsumed)&&this.isWithinToleranceTime()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.isWithinToleranceTime()?Math.max(this.keyboardConsumed?0:this.keyboardValue,this.gamepadButtonConsumed?0:this.gamepadButtonValue):0},enumerable:!0,configurable:!0}),e.prototype.bindKeyboard=function(e,t){this.keyboardBindings.push(new o["default"](e,t))},e.prototype.bindGamepad=function(e,t){this.gamepadButtonBindings.push(new a["default"](e.index,t))},e.prototype.isWithinToleranceTime=function(){return this.toleranceTime<=0||this.timeLastActivation>=Date.now()-this.toleranceTime},e}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{"./GamepadActionBinding":3,"./KeyActionBinder":5,"./KeyboardActionBinding":6}],2:[function(e,t,i){var n=e("./KeyActionBinder"),o=e("./KeyboardAxisBinding"),a=e("./GamepadAxisBinding"),s=function(){function e(e){this._id=e,this.keyboardBindings=[],this.gamepadAxisBindings=[],this.gamepadAxisValue=0}return e.prototype.bind=function(e,t,i,o,a){return"number"==typeof e?this.bindKeyboard(e,t,void 0==i?n["default"].KeyLocations.ANY:i,void 0==o?n["default"].KeyLocations.ANY:o,void 0==a?.15:a):this.bindGamepad(e,void 0==t?.2:t,void 0==i?n["default"].GamepadLocations.ANY:i),this},e.prototype.interpretKeyDown=function(e,t){for(var i=0;i<this.keyboardBindings.length;i++)this.keyboardBindings[i].matchesKeyboardKeyStart(e,t)?this.keyboardBindings[i].value=-1:this.keyboardBindings[i].matchesKeyboardKeyEnd(e,t)&&(this.keyboardBindings[i].value=1)},e.prototype.interpretKeyUp=function(e,t){for(var i=0;i<this.keyboardBindings.length;i++)this.keyboardBindings[i].matchesKeyboardKeyStart(e,t)?this.keyboardBindings[i].value=0:this.keyboardBindings[i].matchesKeyboardKeyEnd(e,t)&&(this.keyboardBindings[i].value=0)},e.prototype.interpretGamepadAxis=function(e,t,i){for(var n=0;n<this.gamepadAxisBindings.length;n++)this.gamepadAxisBindings[n].matchesGamepadAxis(e,t)&&(this.gamepadAxisBindings[n].value=i)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){for(var e,t=0,i=0;i<this.keyboardBindings.length;i++)e=this.keyboardBindings[i].value,Math.abs(e)>Math.abs(t)&&(t=e);for(var i=0;i<this.gamepadAxisBindings.length;i++)e=this.gamepadAxisBindings[i].value,Math.abs(e)>Math.abs(t)&&(t=e);return t},enumerable:!0,configurable:!0}),e.prototype.bindKeyboard=function(e,t,i,n,a){this.keyboardBindings.push(new o["default"](e,t,i,n,a))},e.prototype.bindGamepad=function(e,t,i){this.gamepadAxisBindings.push(new a["default"](e.index,t,i))},e}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{"./GamepadAxisBinding":4,"./KeyActionBinder":5,"./KeyboardAxisBinding":7}],3:[function(e,t,i){var n=e("./KeyActionBinder"),o=function(){function e(e,t){this.buttonCode=e,this.gamepadLocation=t,this.isActivated=!1,this.value=0}return e.prototype.matchesGamepadButton=function(e,t){return!(this.buttonCode!=e&&this.buttonCode!=n["default"].GamepadButtons.ANY.index||this.gamepadLocation!=t&&this.gamepadLocation!=n["default"].GamepadLocations.ANY)},e}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./KeyActionBinder":5}],4:[function(e,t,i){var n=e("./KeyActionBinder"),o=e("./Utils"),a=function(){function e(e,t,i){this.axisCode=e,this.deadZone=t,this.gamepadLocation=i,this._value=0}return e.prototype.matchesGamepadAxis=function(e,t){return this.axisCode==e&&(this.gamepadLocation==t||this.gamepadLocation==n["default"].GamepadLocations.ANY)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value<0?o["default"].map(this._value,-this.deadZone,-1,0,-1,!0):o["default"].map(this._value,this.deadZone,1,0,1,!0)},set:function(e){this._value=e},enumerable:!0,configurable:!0}),e}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"./KeyActionBinder":5,"./Utils":8}],5:[function(e,t,i){var n=e("./../libs/signals/SimpleSignal"),o=e("./Action"),a=e("./Axis"),s=function(){function e(){this.bindCache={},this._isRunning=!1,this._maintainPlayerPositions=!1,this.actions={},this.axes={},this._onActionActivated=new n["default"],this._onActionDeactivated=new n["default"],this._onActionValueChanged=new n["default"],this._onDevicesChanged=new n["default"],this._onRecentDeviceChanged=new n["default"],this.currentFrame=0,this.lastFrameGamepadsChecked=0,this.start()}return e.prototype.start=function(){this._isRunning||(window.addEventListener("keydown",this.getBoundFunction(this.onKeyDown)),window.addEventListener("keyup",this.getBoundFunction(this.onKeyUp)),window.addEventListener("gamepadconnected",this.getBoundFunction(this.onGamepadAdded)),window.addEventListener("gamepaddisconnected",this.getBoundFunction(this.onGamepadRemoved)),this.refreshGamepadList(),this._isRunning=!0,this.incrementFrameCount())},e.prototype.stop=function(){this._isRunning&&(window.removeEventListener("keydown",this.getBoundFunction(this.onKeyDown)),window.removeEventListener("keyup",this.getBoundFunction(this.onKeyUp)),window.removeEventListener("gamepadconnected",this.getBoundFunction(this.onGamepadAdded)),window.removeEventListener("gamepaddisconnected",this.getBoundFunction(this.onGamepadRemoved)),this._isRunning=!1)},e.prototype.action=function(e){return this.lastFrameGamepadsChecked<this.currentFrame&&this.updateGamepadsState(),this.actions.hasOwnProperty(e)||(this.actions[e]=new o["default"](e)),this.actions[e]},e.prototype.axis=function(e){return this.lastFrameGamepadsChecked<this.currentFrame&&this.updateGamepadsState(),this.axes.hasOwnProperty(e)||(this.axes[e]=new a["default"](e)),this.axes[e]},Object.defineProperty(e.prototype,"onActionActivated",{get:function(){return this._onActionActivated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onActionDeactivated",{get:function(){return this._onActionDeactivated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onActionValueChanged",{get:function(){return this._onActionValueChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDevicesChanged",{get:function(){return this._onDevicesChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onRecentDeviceChanged",{get:function(){return this._onRecentDeviceChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),e.prototype.onKeyDown=function(e){for(var t in this.actions)this.actions[t].interpretKeyDown(e.keyCode,e.location);for(var t in this.axes)this.axes[t].interpretKeyDown(e.keyCode,e.location)},e.prototype.onKeyUp=function(e){for(var t in this.actions)this.actions[t].interpretKeyUp(e.keyCode,e.location);for(var t in this.axes)this.axes[t].interpretKeyUp(e.keyCode,e.location)},e.prototype.onGamepadAdded=function(e){this.refreshGamepadList()},e.prototype.onGamepadRemoved=function(e){this.refreshGamepadList()},e.prototype.incrementFrameCount=function(){this._isRunning&&(this.currentFrame++,window.requestAnimationFrame(this.incrementFrameCount.bind(this)))},e.prototype.updateGamepadsState=function(){var e,t,i,n,o,a,s,r,d=navigator.getGamepads();for(t=0;t<d.length;t++)if(e=d[t],null!=e){for(var u in this.actions)for(o=this.actions[u],a=e.buttons,n=a.length,i=0;n>i;i++)o.interpretGamepadButton(i,t,a[i].pressed,a[i].value);for(var u in this.axes)for(s=this.axes[u],r=e.axes,n=r.length,i=0;n>i;i++)s.interpretGamepadAxis(i,t,r[i])}this.lastFrameGamepadsChecked=this.currentFrame},e.prototype.refreshGamepadList=function(){this._onDevicesChanged.dispatch()},e.prototype.getBoundFunction=function(e){return this.bindCache.hasOwnProperty(e)||(this.bindCache[e]=e.bind(this)),this.bindCache[e]},e.VERSION="1.0.0",e.KeyCodes={ANY:81653812,A:65,ALT:18,B:66,BACKQUOTE:192,BACKSLASH:220,BACKSPACE:8,C:67,CAPS_LOCK:20,COMMA:188,CTRL:17,D:68,DELETE:46,DOWN:40,E:69,END:35,ENTER:13,EQUAL:187,ESCAPE:27,F:70,F1:112,F10:121,F11:122,F12:123,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,G:71,H:72,HOME:36,I:73,INSERT:45,J:74,K:75,L:76,LEFT:37,LEFTBRACKET:219,M:77,MINUS:189,N:78,NUMBER_0:48,NUMBER_1:49,NUMBER_2:50,NUMBER_3:51,NUMBER_4:52,NUMBER_5:53,NUMBER_6:54,NUMBER_7:55,NUMBER_8:56,NUMBER_9:57,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,NUM_LOCK:144,O:79,P:80,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PERIOD:190,Q:81,QUOTE:222,R:82,RIGHT:39,RIGHTBRACKET:221,S:83,SCROLL_LOCK:145,SELECT:93,SEMICOLON:186,SHIFT:16,SLASH:191,SPACE:32,T:84,TAB:9,U:85,UP:38,V:86,W:87,WINDOWS_LEFT:91,WINDOWS_RIGHT:92,X:88,Y:89,Z:90},e.KeyLocations={ANY:81653813,STANDARD:0,LEFT:1,RIGHT:2,NUMPAD:3},e.GamepadLocations={ANY:81653814},e.GamepadButtons={ANY:{index:81653815},ACTION_DOWN:{index:0},ACTION_RIGHT:{index:1},ACTION_LEFT:{index:2},ACTION_UP:{index:3},LEFT_SHOULDER:{index:4},RIGHT_SHOULDER:{index:5},LEFT_SHOULDER_BOTTOM:{index:6},RIGHT_SHOULDER_BOTTOM:{index:7},SELECT:{index:8},START:{index:9},STICK_LEFT_PRESS:{index:10},STICK_RIGHT_PRESS:{index:11},DPAD_UP:{index:12},DPAD_DOWN:{index:13},DPAD_LEFT:{index:14},DPAD_RIGHT:{index:15}},e.GamepadAxes={STICK_LEFT_X:{index:0},STICK_LEFT_Y:{index:1},STICK_RIGHT_X:{index:2},STICK_RIGHT_Y:{index:3}},e}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s,window.KeyActionBinder=s},{"./../libs/signals/SimpleSignal":9,"./Action":1,"./Axis":2}],6:[function(e,t,i){var n=e("./KeyActionBinder"),o=function(){function e(e,t){this.keyCode=e,this.keyLocation=t,this.isActivated=!1}return e.prototype.matchesKeyboardKey=function(e,t){return!(this.keyCode!=e&&this.keyCode!=n["default"].KeyCodes.ANY||this.keyLocation!=t&&this.keyLocation!=n["default"].KeyLocations.ANY)},e}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./KeyActionBinder":5}],7:[function(e,t,i){var n=e("./KeyActionBinder"),o=e("./Utils"),a=function(){function e(e,t,i,n,o){this.keyCodeA=e,this.keyLocationA=i,this.keyCodeB=t,this.keyLocationB=n,this.transitionTime=1e3*o,this.timeLastChange=NaN,this.targetValue=this.previousValue=0}return e.prototype.matchesKeyboardKeyStart=function(e,t){return!(this.keyCodeA!=e&&this.keyCodeA!=n["default"].KeyCodes.ANY||this.keyLocationA!=t&&this.keyLocationA!=n["default"].KeyLocations.ANY)},e.prototype.matchesKeyboardKeyEnd=function(e,t){return!(this.keyCodeB!=e&&this.keyCodeB!=n["default"].KeyCodes.ANY||this.keyLocationB!=t&&this.keyLocationB!=n["default"].KeyLocations.ANY)},Object.defineProperty(e.prototype,"value",{get:function(){return isNaN(this.timeLastChange)?this.targetValue:o["default"].map(Date.now(),this.timeLastChange,this.timeLastChange+this.currentTransitionTime,this.previousValue,this.targetValue,!0)},set:function(e){e!=this.targetValue&&(this.previousValue=this.value,this.targetValue=e,this.currentTransitionTime=o["default"].map(Math.abs(this.targetValue-this.previousValue),0,1,0,this.transitionTime),this.timeLastChange=Date.now())},enumerable:!0,configurable:!0}),e}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"./KeyActionBinder":5,"./Utils":8}],8:[function(e,t,i){var n=function(){function e(){}return e.map=function(t,i,n,o,a,s){if(void 0===o&&(o=0),void 0===a&&(a=1),void 0===s&&(s=!1),i==n)return o;var r=(t-i)/(n-i)*(a-o)+o;return s&&(r=a>o?this.clamp(r,o,a):e.clamp(r,a,o)),r},e.clamp=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=1),t>e?t:e>i?i:e},e}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],9:[function(e,t,i){var n=function(){function e(){this.functions=[]}return e.prototype.add=function(e){return-1==this.functions.indexOf(e)?(this.functions.push(e),!0):!1},e.prototype.remove=function(e){return this.ifr=this.functions.indexOf(e),this.ifr>-1?(this.functions.splice(this.ifr,1),!0):!1},e.prototype.removeAll=function(){return this.functions.length>0?(this.functions.length=0,!0):!1},e.prototype.dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var i=this.functions.concat(),n=0;n<i.length;n++)i[n].apply(void 0,e)},Object.defineProperty(e.prototype,"numItems",{get:function(){return this.functions.length},enumerable:!0,configurable:!0}),e}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}]},{},[5]);