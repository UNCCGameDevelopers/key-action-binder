define(["require", "exports", './KeyActionBinder', './Utils'], function (require, exports, KeyActionBinder_1, Utils_1) {
    /**
     * Information on a keyboard event filter
     */
    var KeyboardAxisBinding = (function () {
        // ================================================================================================================
        // CONSTRUCTOR ----------------------------------------------------------------------------------------------------
        function KeyboardAxisBinding(keyCodeA, keyCodeB, keyLocationA, keyLocationB, transitionTimeSeconds) {
            this.keyCodeA = keyCodeA;
            this.keyLocationA = keyLocationA;
            this.keyCodeB = keyCodeB;
            this.keyLocationB = keyLocationB;
            this.transitionTime = transitionTimeSeconds * 1000;
            this.timeLastChange = NaN;
            this.targetValue = this.previousValue = 0;
        }
        // ================================================================================================================
        // PUBLIC INTERFACE -----------------------------------------------------------------------------------------------
        KeyboardAxisBinding.prototype.matchesKeyboardKeyStart = function (keyCode, keyLocation) {
            return (this.keyCodeA == keyCode || this.keyCodeA == KeyActionBinder_1.default.KeyCodes.ANY) && (this.keyLocationA == keyLocation || this.keyLocationA == KeyActionBinder_1.default.KeyLocations.ANY);
        };
        KeyboardAxisBinding.prototype.matchesKeyboardKeyEnd = function (keyCode, keyLocation) {
            return (this.keyCodeB == keyCode || this.keyCodeB == KeyActionBinder_1.default.KeyCodes.ANY) && (this.keyLocationB == keyLocation || this.keyLocationB == KeyActionBinder_1.default.KeyLocations.ANY);
        };
        Object.defineProperty(KeyboardAxisBinding.prototype, "value", {
            // ================================================================================================================
            // ACCESSOR INTERFACE ---------------------------------------------------------------------------------------------
            get: function () {
                // TODO: this is linear.. add some easing?
                if (isNaN(this.timeLastChange))
                    return this.targetValue;
                return Utils_1.default.map(Date.now(), this.timeLastChange, this.timeLastChange + this.currentTransitionTime, this.previousValue, this.targetValue, true);
            },
            set: function (newValue) {
                if (newValue != this.targetValue) {
                    this.previousValue = this.value;
                    this.targetValue = newValue;
                    this.currentTransitionTime = Utils_1.default.map(Math.abs(this.targetValue - this.previousValue), 0, 1, 0, this.transitionTime);
                    this.timeLastChange = Date.now();
                }
            },
            enumerable: true,
            configurable: true
        });
        return KeyboardAxisBinding;
    })();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.default = KeyboardAxisBinding;
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvS2V5Ym9hcmRBeGlzQmluZGluZy50cyJdLCJuYW1lcyI6WyJLZXlib2FyZEF4aXNCaW5kaW5nIiwiS2V5Ym9hcmRBeGlzQmluZGluZy5jb25zdHJ1Y3RvciIsIktleWJvYXJkQXhpc0JpbmRpbmcubWF0Y2hlc0tleWJvYXJkS2V5U3RhcnQiLCJLZXlib2FyZEF4aXNCaW5kaW5nLm1hdGNoZXNLZXlib2FyZEtleUVuZCIsIktleWJvYXJkQXhpc0JpbmRpbmcudmFsdWUiXSwibWFwcGluZ3MiOiI7SUFHQTs7T0FFRztJQUNIO1FBaUJDQSxtSEFBbUhBO1FBQ25IQSxtSEFBbUhBO1FBRW5IQSw2QkFBWUEsUUFBZUEsRUFBRUEsUUFBZUEsRUFBRUEsWUFBbUJBLEVBQUVBLFlBQW1CQSxFQUFFQSxxQkFBNEJBO1lBQ25IQyxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxRQUFRQSxDQUFDQTtZQUN6QkEsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FBR0EsWUFBWUEsQ0FBQ0E7WUFDakNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLFFBQVFBLENBQUNBO1lBQ3pCQSxJQUFJQSxDQUFDQSxZQUFZQSxHQUFHQSxZQUFZQSxDQUFDQTtZQUVqQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EscUJBQXFCQSxHQUFHQSxJQUFJQSxDQUFDQTtZQUVuREEsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFDMUJBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBLGFBQWFBLEdBQUdBLENBQUNBLENBQUNBO1FBQzNDQSxDQUFDQTtRQUdERCxtSEFBbUhBO1FBQ25IQSxtSEFBbUhBO1FBRTVHQSxxREFBdUJBLEdBQTlCQSxVQUErQkEsT0FBY0EsRUFBRUEsV0FBa0JBO1lBQ2hFRSxNQUFNQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxJQUFJQSxPQUFPQSxJQUFJQSxJQUFJQSxDQUFDQSxRQUFRQSxJQUFJQSx5QkFBZUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsWUFBWUEsSUFBSUEsV0FBV0EsSUFBSUEsSUFBSUEsQ0FBQ0EsWUFBWUEsSUFBSUEseUJBQWVBLENBQUNBLFlBQVlBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO1FBQ25MQSxDQUFDQTtRQUVNRixtREFBcUJBLEdBQTVCQSxVQUE2QkEsT0FBY0EsRUFBRUEsV0FBa0JBO1lBQzlERyxNQUFNQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxJQUFJQSxPQUFPQSxJQUFJQSxJQUFJQSxDQUFDQSxRQUFRQSxJQUFJQSx5QkFBZUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsWUFBWUEsSUFBSUEsV0FBV0EsSUFBSUEsSUFBSUEsQ0FBQ0EsWUFBWUEsSUFBSUEseUJBQWVBLENBQUNBLFlBQVlBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO1FBQ25MQSxDQUFDQTtRQU1ESCxzQkFBV0Esc0NBQUtBO1lBSGhCQSxtSEFBbUhBO1lBQ25IQSxtSEFBbUhBO2lCQUVuSEE7Z0JBQ0NJLDBDQUEwQ0E7Z0JBQzFDQSxFQUFFQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQTtvQkFBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0E7Z0JBQ3hEQSxNQUFNQSxDQUFDQSxlQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxFQUFFQSxFQUFFQSxJQUFJQSxDQUFDQSxjQUFjQSxFQUFFQSxJQUFJQSxDQUFDQSxjQUFjQSxHQUFHQSxJQUFJQSxDQUFDQSxxQkFBcUJBLEVBQUVBLElBQUlBLENBQUNBLGFBQWFBLEVBQUVBLElBQUlBLENBQUNBLFdBQVdBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO1lBQ2pKQSxDQUFDQTtpQkFFREosVUFBaUJBLFFBQWVBO2dCQUMvQkksRUFBRUEsQ0FBQ0EsQ0FBQ0EsUUFBUUEsSUFBSUEsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7b0JBQ2xDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQTtvQkFDaENBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBLFFBQVFBLENBQUNBO29CQUM1QkEsSUFBSUEsQ0FBQ0EscUJBQXFCQSxHQUFHQSxlQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxXQUFXQSxHQUFHQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQTtvQkFDdEhBLElBQUlBLENBQUNBLGNBQWNBLEdBQUdBLElBQUlBLENBQUNBLEdBQUdBLEVBQUVBLENBQUNBO2dCQUNsQ0EsQ0FBQ0E7WUFDRkEsQ0FBQ0E7OztXQVRBSjtRQVVGQSwwQkFBQ0E7SUFBREEsQ0E5REEsQUE4RENBLElBQUE7SUE5REQ7eUNBOERDLENBQUEiLCJmaWxlIjoiY29yZS9LZXlib2FyZEF4aXNCaW5kaW5nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEtleUFjdGlvbkJpbmRlciBmcm9tICcuL0tleUFjdGlvbkJpbmRlcic7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuL1V0aWxzJztcclxuXHJcbi8qKlxyXG4gKiBJbmZvcm1hdGlvbiBvbiBhIGtleWJvYXJkIGV2ZW50IGZpbHRlclxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS2V5Ym9hcmRBeGlzQmluZGluZyB7XHJcblxyXG5cdC8vIFByb3BlcnRpZXNcclxuXHRwdWJsaWMga2V5Q29kZUE6bnVtYmVyO1xyXG5cdHB1YmxpYyBrZXlMb2NhdGlvbkE6bnVtYmVyO1xyXG5cclxuXHRwdWJsaWMga2V5Q29kZUI6bnVtYmVyO1xyXG5cdHB1YmxpYyBrZXlMb2NhdGlvbkI6bnVtYmVyO1xyXG5cclxuXHRwdWJsaWMgdHJhbnNpdGlvblRpbWU6bnVtYmVyO1x0XHRcdC8vIFRpbWUgdG8gdHJhbnNpdGlvbiB2YWx1ZXMgZnJvbSAwIHRvIDEsIGluIG1zICh0aGUgYWN0dWFsIHRyYW5zaXRpb24gdGltZSB3aWxsIGJlIHNob3J0ZXIsIHRoaXMgaXMgZm9yIHRoZSBmdWxsIHJhbmdlKVxyXG5cclxuXHRwcml2YXRlIHRpbWVMYXN0Q2hhbmdlOm51bWJlcjtcdFx0XHRcclxuXHRwcml2YXRlIHByZXZpb3VzVmFsdWU6bnVtYmVyO1xyXG5cdHByaXZhdGUgdGFyZ2V0VmFsdWU6bnVtYmVyO1x0XHRcdFx0Ly8gLTEuLjFcclxuXHRwcml2YXRlIGN1cnJlbnRUcmFuc2l0aW9uVGltZTpudW1iZXI7XHQvLyBUaW1lIGZvciB0aGUgY3VycmVudCBjaGFuZ2VcclxuXHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyBDT05TVFJVQ1RPUiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdGNvbnN0cnVjdG9yKGtleUNvZGVBOm51bWJlciwga2V5Q29kZUI6bnVtYmVyLCBrZXlMb2NhdGlvbkE6bnVtYmVyLCBrZXlMb2NhdGlvbkI6bnVtYmVyLCB0cmFuc2l0aW9uVGltZVNlY29uZHM6bnVtYmVyKSB7XHJcblx0XHR0aGlzLmtleUNvZGVBID0ga2V5Q29kZUE7XHJcblx0XHR0aGlzLmtleUxvY2F0aW9uQSA9IGtleUxvY2F0aW9uQTtcclxuXHRcdHRoaXMua2V5Q29kZUIgPSBrZXlDb2RlQjtcclxuXHRcdHRoaXMua2V5TG9jYXRpb25CID0ga2V5TG9jYXRpb25CO1xyXG5cclxuXHRcdHRoaXMudHJhbnNpdGlvblRpbWUgPSB0cmFuc2l0aW9uVGltZVNlY29uZHMgKiAxMDAwO1xyXG5cclxuXHRcdHRoaXMudGltZUxhc3RDaGFuZ2UgPSBOYU47XHJcblx0XHR0aGlzLnRhcmdldFZhbHVlID0gdGhpcy5wcmV2aW91c1ZhbHVlID0gMDtcclxuXHR9XHJcblxyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0Ly8gUFVCTElDIElOVEVSRkFDRSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHRwdWJsaWMgbWF0Y2hlc0tleWJvYXJkS2V5U3RhcnQoa2V5Q29kZTpudW1iZXIsIGtleUxvY2F0aW9uOm51bWJlcik6Ym9vbGVhbiB7XHJcblx0XHRyZXR1cm4gKHRoaXMua2V5Q29kZUEgPT0ga2V5Q29kZSB8fCB0aGlzLmtleUNvZGVBID09IEtleUFjdGlvbkJpbmRlci5LZXlDb2Rlcy5BTlkpICYmICh0aGlzLmtleUxvY2F0aW9uQSA9PSBrZXlMb2NhdGlvbiB8fCB0aGlzLmtleUxvY2F0aW9uQSA9PSBLZXlBY3Rpb25CaW5kZXIuS2V5TG9jYXRpb25zLkFOWSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgbWF0Y2hlc0tleWJvYXJkS2V5RW5kKGtleUNvZGU6bnVtYmVyLCBrZXlMb2NhdGlvbjpudW1iZXIpOmJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuICh0aGlzLmtleUNvZGVCID09IGtleUNvZGUgfHwgdGhpcy5rZXlDb2RlQiA9PSBLZXlBY3Rpb25CaW5kZXIuS2V5Q29kZXMuQU5ZKSAmJiAodGhpcy5rZXlMb2NhdGlvbkIgPT0ga2V5TG9jYXRpb24gfHwgdGhpcy5rZXlMb2NhdGlvbkIgPT0gS2V5QWN0aW9uQmluZGVyLktleUxvY2F0aW9ucy5BTlkpO1xyXG5cdH1cclxuXHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyBBQ0NFU1NPUiBJTlRFUkZBQ0UgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdHB1YmxpYyBnZXQgdmFsdWUoKTpudW1iZXIge1xyXG5cdFx0Ly8gVE9ETzogdGhpcyBpcyBsaW5lYXIuLiBhZGQgc29tZSBlYXNpbmc/XHJcblx0XHRpZiAoaXNOYU4odGhpcy50aW1lTGFzdENoYW5nZSkpIHJldHVybiB0aGlzLnRhcmdldFZhbHVlO1xyXG5cdFx0cmV0dXJuIFV0aWxzLm1hcChEYXRlLm5vdygpLCB0aGlzLnRpbWVMYXN0Q2hhbmdlLCB0aGlzLnRpbWVMYXN0Q2hhbmdlICsgdGhpcy5jdXJyZW50VHJhbnNpdGlvblRpbWUsIHRoaXMucHJldmlvdXNWYWx1ZSwgdGhpcy50YXJnZXRWYWx1ZSwgdHJ1ZSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IHZhbHVlKG5ld1ZhbHVlOm51bWJlcikge1xyXG5cdFx0aWYgKG5ld1ZhbHVlICE9IHRoaXMudGFyZ2V0VmFsdWUpIHtcclxuXHRcdFx0dGhpcy5wcmV2aW91c1ZhbHVlID0gdGhpcy52YWx1ZTtcclxuXHRcdFx0dGhpcy50YXJnZXRWYWx1ZSA9IG5ld1ZhbHVlO1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRUcmFuc2l0aW9uVGltZSA9IFV0aWxzLm1hcChNYXRoLmFicyh0aGlzLnRhcmdldFZhbHVlIC0gdGhpcy5wcmV2aW91c1ZhbHVlKSwgMCwgMSwgMCwgdGhpcy50cmFuc2l0aW9uVGltZSk7XHJcblx0XHRcdHRoaXMudGltZUxhc3RDaGFuZ2UgPSBEYXRlLm5vdygpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=