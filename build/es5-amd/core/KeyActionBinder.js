define(["require", "exports", './../libs/signals/SimpleSignal', './Action', './Axis'], function (require, exports, SimpleSignal_1, Action_1, Axis_1) {
    /**
     * Provides universal input control for game controllers and keyboard
     * More info: https://github.com/zeh/key-action-binder.ts
     *
     * @author zeh fernando
     */
    var KeyActionBinder = (function () {
        // ================================================================================================================
        // CONSTRUCTOR ----------------------------------------------------------------------------------------------------
        function KeyActionBinder() {
            this.bindCache = {};
            this._isRunning = false;
            this._maintainPlayerPositions = false;
            this.actions = {};
            this.axes = {};
            this._onActionActivated = new SimpleSignal_1.default();
            this._onActionDeactivated = new SimpleSignal_1.default();
            this._onActionValueChanged = new SimpleSignal_1.default();
            this._onDevicesChanged = new SimpleSignal_1.default();
            this._onRecentDeviceChanged = new SimpleSignal_1.default();
            this.currentFrame = 0;
            this.lastFrameGamepadsChecked = 0;
            this.start();
        }
        // ================================================================================================================
        // PUBLIC INTERFACE -----------------------------------------------------------------------------------------------
        /**
         * Starts listening for input events.
         *
         * <p>This happens by default when a KeyActionBinder object is instantiated; this method is only useful if
         * called after <code>stop()</code> has been used.</p>
         *
         * <p>Calling this method when a KeyActionBinder instance is already running has no effect.</p>
         *
         * @see #isRunning
         * @see #stop()
         */
        KeyActionBinder.prototype.start = function () {
            if (!this._isRunning) {
                // Starts listening to keyboard events
                window.addEventListener("keydown", this.getBoundFunction(this.onKeyDown));
                //window.addEventListener("keypress", this.getBoundFunction(this.onKeyDown)); // this fires with completely unrelated key codes; TODO: investigate why
                window.addEventListener("keyup", this.getBoundFunction(this.onKeyUp));
                // Starts listening to device change events
                window.addEventListener("gamepadconnected", this.getBoundFunction(this.onGamepadAdded));
                window.addEventListener("gamepaddisconnected", this.getBoundFunction(this.onGamepadRemoved));
                this.refreshGamepadList();
                this._isRunning = true;
                this.incrementFrameCount();
            }
        };
        /**
         * Stops listening for input events.
         *
         * <p>Action bindings are not lost when a KeyActionBinder instance is stopped; it merely starts ignoring
         * all input events, until <code>start()<code> is called again.</p>
         *
         * <p>This method should always be called when you don't need a KeyActionBinder instance anymore, otherwise
         * it'll be listening to events indefinitely.</p>
         *
         * <p>Calling this method when this a KeyActionBinder instance is already stopped has no effect.</p>
         *
         * @see #isRunning
         * @see #start()
         */
        KeyActionBinder.prototype.stop = function () {
            if (this._isRunning) {
                // Stops listening to keyboard events
                window.removeEventListener("keydown", this.getBoundFunction(this.onKeyDown));
                window.removeEventListener("keyup", this.getBoundFunction(this.onKeyUp));
                // Stops listening to device change events
                window.removeEventListener("gamepadconnected", this.getBoundFunction(this.onGamepadAdded));
                window.removeEventListener("gamepaddisconnected", this.getBoundFunction(this.onGamepadRemoved));
                this._isRunning = false;
            }
        };
        /**
         * Gets an action instance, creating it if necessary
         */
        KeyActionBinder.prototype.action = function (id) {
            // Check gamepad state
            if (this.lastFrameGamepadsChecked < this.currentFrame)
                this.updateGamepadsState();
            // Create Action first if needed
            if (!this.actions.hasOwnProperty(id))
                this.actions[id] = new Action_1.default(id);
            return this.actions[id];
        };
        /**
         * Gets an axis instance, creating it if necessary
         */
        KeyActionBinder.prototype.axis = function (id) {
            // Check gamepad state
            if (this.lastFrameGamepadsChecked < this.currentFrame)
                this.updateGamepadsState();
            // Create Axis first if needed
            if (!this.axes.hasOwnProperty(id))
                this.axes[id] = new Axis_1.default(id);
            return this.axes[id];
        };
        Object.defineProperty(KeyActionBinder.prototype, "onActionActivated", {
            // ================================================================================================================
            // ACCESSOR INTERFACE ---------------------------------------------------------------------------------------------
            get: function () {
                return this._onActionActivated;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(KeyActionBinder.prototype, "onActionDeactivated", {
            get: function () {
                return this._onActionDeactivated;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(KeyActionBinder.prototype, "onActionValueChanged", {
            get: function () {
                return this._onActionValueChanged;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(KeyActionBinder.prototype, "onDevicesChanged", {
            get: function () {
                return this._onDevicesChanged;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(KeyActionBinder.prototype, "onRecentDeviceChanged", {
            get: function () {
                return this._onRecentDeviceChanged;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(KeyActionBinder.prototype, "isRunning", {
            /**
             * Whether this KeyActionBinder instance is running, or not. This property is read-only.
             *
             * @see #start()
             * @see #stop()
             */
            get: function () {
                return this._isRunning;
            },
            enumerable: true,
            configurable: true
        });
        // ================================================================================================================
        // EVENT INTERFACE ------------------------------------------------------------------------------------------------
        KeyActionBinder.prototype.onKeyDown = function (e) {
            for (var iis in this.actions)
                this.actions[iis].interpretKeyDown(e.keyCode, e.location);
            for (var iis in this.axes)
                this.axes[iis].interpretKeyDown(e.keyCode, e.location);
        };
        KeyActionBinder.prototype.onKeyUp = function (e) {
            for (var iis in this.actions)
                this.actions[iis].interpretKeyUp(e.keyCode, e.location);
            for (var iis in this.axes)
                this.axes[iis].interpretKeyUp(e.keyCode, e.location);
        };
        KeyActionBinder.prototype.onGamepadAdded = function (e) {
            this.refreshGamepadList();
        };
        KeyActionBinder.prototype.onGamepadRemoved = function (e) {
            this.refreshGamepadList();
        };
        // ================================================================================================================
        // PRIVATE INTERFACE ----------------------------------------------------------------------------------------------
        KeyActionBinder.prototype.incrementFrameCount = function () {
            if (this._isRunning) {
                this.currentFrame++;
                window.requestAnimationFrame(this.incrementFrameCount.bind(this));
            }
        };
        /**
         * Update the known state of all buttons/axis
         */
        KeyActionBinder.prototype.updateGamepadsState = function () {
            //console.time("check");
            // Check all buttons of all gamepads
            var gamepads = navigator.getGamepads();
            var gamepad;
            var i, j, l;
            var action;
            var buttons;
            var axis;
            var axes;
            // For all gamepads...
            for (i = 0; i < gamepads.length; i++) {
                gamepad = gamepads[i];
                if (gamepad != null) {
                    // ..and all actions...
                    for (var iis in this.actions) {
                        action = this.actions[iis];
                        // ...interpret all gamepad buttons
                        buttons = gamepad.buttons;
                        l = buttons.length;
                        for (j = 0; j < l; j++) {
                            action.interpretGamepadButton(j, i, buttons[j].pressed, buttons[j].value);
                        }
                    }
                    // And in all axes...
                    for (var iis in this.axes) {
                        axis = this.axes[iis];
                        // ...and all gamepad axes
                        axes = gamepad.axes;
                        l = axes.length;
                        for (j = 0; j < l; j++) {
                            axis.interpretGamepadAxis(j, i, axes[j]);
                        }
                    }
                }
            }
            this.lastFrameGamepadsChecked = this.currentFrame;
            //console.timeEnd("check");
        };
        KeyActionBinder.prototype.refreshGamepadList = function () {
            // The list of game devices has changed
            // TODO: implement _maintainPlayerPositions ? Apparently the browser already does something like that...
            //console.log("List of gamepads refreshed, new list = " + navigator.getGamepads().length + " items");
            // Dispatch the signal
            this._onDevicesChanged.dispatch();
        };
        /**
         * Utility function: creates a function bound to "this".
         * This needs to be stored because the same reference needs to be used when removing listeners.
         */
        KeyActionBinder.prototype.getBoundFunction = function (func) {
            if (!this.bindCache.hasOwnProperty(func)) {
                this.bindCache[func] = func.bind(this);
            }
            return this.bindCache[func];
        };
        // Constants
        KeyActionBinder.VERSION = "1.0.0";
        // Enums (Internal)
        KeyActionBinder.KeyCodes = {
            ANY: 81653812,
            A: 65,
            ALT: 18,
            B: 66,
            BACKQUOTE: 192,
            BACKSLASH: 220,
            BACKSPACE: 8,
            C: 67,
            CAPS_LOCK: 20,
            COMMA: 188,
            CTRL: 17,
            D: 68,
            DELETE: 46,
            DOWN: 40,
            E: 69,
            END: 35,
            ENTER: 13,
            EQUAL: 187,
            ESCAPE: 27,
            F: 70,
            F1: 112,
            F10: 121,
            F11: 122,
            F12: 123,
            F2: 113,
            F3: 114,
            F4: 115,
            F5: 116,
            F6: 117,
            F7: 118,
            F8: 119,
            F9: 120,
            G: 71,
            H: 72,
            HOME: 36,
            I: 73,
            INSERT: 45,
            J: 74,
            K: 75,
            L: 76,
            LEFT: 37,
            LEFTBRACKET: 219,
            M: 77,
            MINUS: 189,
            N: 78,
            NUMBER_0: 48,
            NUMBER_1: 49,
            NUMBER_2: 50,
            NUMBER_3: 51,
            NUMBER_4: 52,
            NUMBER_5: 53,
            NUMBER_6: 54,
            NUMBER_7: 55,
            NUMBER_8: 56,
            NUMBER_9: 57,
            NUMPAD_0: 96,
            NUMPAD_1: 97,
            NUMPAD_2: 98,
            NUMPAD_3: 99,
            NUMPAD_4: 100,
            NUMPAD_5: 101,
            NUMPAD_6: 102,
            NUMPAD_7: 103,
            NUMPAD_8: 104,
            NUMPAD_9: 105,
            NUMPAD_ADD: 107,
            NUMPAD_DECIMAL: 110,
            NUMPAD_DIVIDE: 111,
            NUMPAD_MULTIPLY: 106,
            NUMPAD_SUBTRACT: 109,
            NUM_LOCK: 144,
            O: 79,
            P: 80,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PAUSE: 19,
            PERIOD: 190,
            Q: 81,
            QUOTE: 222,
            R: 82,
            RIGHT: 39,
            RIGHTBRACKET: 221,
            S: 83,
            SCROLL_LOCK: 145,
            SELECT: 93,
            SEMICOLON: 186,
            SHIFT: 16,
            SLASH: 191,
            SPACE: 32,
            T: 84,
            TAB: 9,
            U: 85,
            UP: 38,
            V: 86,
            W: 87,
            WINDOWS_LEFT: 91,
            WINDOWS_RIGHT: 92,
            X: 88,
            Y: 89,
            Z: 90
        };
        KeyActionBinder.KeyLocations = {
            ANY: 81653813,
            STANDARD: 0,
            LEFT: 1,
            RIGHT: 2,
            NUMPAD: 3,
        };
        KeyActionBinder.GamepadLocations = {
            ANY: 81653814,
        };
        KeyActionBinder.GamepadButtons = {
            ANY: { index: 81653815 },
            ACTION_DOWN: { index: 0 },
            ACTION_RIGHT: { index: 1 },
            ACTION_LEFT: { index: 2 },
            ACTION_UP: { index: 3 },
            LEFT_SHOULDER: { index: 4 },
            RIGHT_SHOULDER: { index: 5 },
            LEFT_SHOULDER_BOTTOM: { index: 6 },
            RIGHT_SHOULDER_BOTTOM: { index: 7 },
            SELECT: { index: 8 },
            START: { index: 9 },
            STICK_LEFT_PRESS: { index: 10 },
            STICK_RIGHT_PRESS: { index: 11 },
            DPAD_UP: { index: 12 },
            DPAD_DOWN: { index: 13 },
            DPAD_LEFT: { index: 14 },
            DPAD_RIGHT: { index: 15 }
        };
        KeyActionBinder.GamepadAxes = {
            STICK_LEFT_X: { index: 0 },
            STICK_LEFT_Y: { index: 1 },
            STICK_RIGHT_X: { index: 2 },
            STICK_RIGHT_Y: { index: 3 }
        };
        return KeyActionBinder;
    })();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.default = KeyActionBinder;
});
// Create a global object with the class - only used in the single file version, replaced at build time
// #IFDEF ES5SINGLE // window["KeyActionBinder"] = KeyActionBinder;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvS2V5QWN0aW9uQmluZGVyLnRzIl0sIm5hbWVzIjpbIktleUFjdGlvbkJpbmRlciIsIktleUFjdGlvbkJpbmRlci5jb25zdHJ1Y3RvciIsIktleUFjdGlvbkJpbmRlci5zdGFydCIsIktleUFjdGlvbkJpbmRlci5zdG9wIiwiS2V5QWN0aW9uQmluZGVyLmFjdGlvbiIsIktleUFjdGlvbkJpbmRlci5heGlzIiwiS2V5QWN0aW9uQmluZGVyLm9uQWN0aW9uQWN0aXZhdGVkIiwiS2V5QWN0aW9uQmluZGVyLm9uQWN0aW9uRGVhY3RpdmF0ZWQiLCJLZXlBY3Rpb25CaW5kZXIub25BY3Rpb25WYWx1ZUNoYW5nZWQiLCJLZXlBY3Rpb25CaW5kZXIub25EZXZpY2VzQ2hhbmdlZCIsIktleUFjdGlvbkJpbmRlci5vblJlY2VudERldmljZUNoYW5nZWQiLCJLZXlBY3Rpb25CaW5kZXIuaXNSdW5uaW5nIiwiS2V5QWN0aW9uQmluZGVyLm9uS2V5RG93biIsIktleUFjdGlvbkJpbmRlci5vbktleVVwIiwiS2V5QWN0aW9uQmluZGVyLm9uR2FtZXBhZEFkZGVkIiwiS2V5QWN0aW9uQmluZGVyLm9uR2FtZXBhZFJlbW92ZWQiLCJLZXlBY3Rpb25CaW5kZXIuaW5jcmVtZW50RnJhbWVDb3VudCIsIktleUFjdGlvbkJpbmRlci51cGRhdGVHYW1lcGFkc1N0YXRlIiwiS2V5QWN0aW9uQmluZGVyLnJlZnJlc2hHYW1lcGFkTGlzdCIsIktleUFjdGlvbkJpbmRlci5nZXRCb3VuZEZ1bmN0aW9uIl0sIm1hcHBpbmdzIjoiO0lBSUE7Ozs7O09BS0c7SUFDSDtRQXlLQ0EsbUhBQW1IQTtRQUNuSEEsbUhBQW1IQTtRQUVuSEE7WUFDQ0MsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsRUFBRUEsQ0FBQ0E7WUFFcEJBLElBQUlBLENBQUNBLFVBQVVBLEdBQUdBLEtBQUtBLENBQUNBO1lBQ3hCQSxJQUFJQSxDQUFDQSx3QkFBd0JBLEdBQUdBLEtBQUtBLENBQUNBO1lBQ3RDQSxJQUFJ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QSxDQUFDQSxFQUFFQSxFQUFFQTtZQUNMQSxNQUFNQSxFQUFFQSxFQUFFQTtZQUNWQSxJQUFJQSxFQUFFQSxFQUFFQTtZQUNSQSxDQUFDQSxFQUFFQSxFQUFFQTtZQUNMQSxHQUFHQSxFQUFFQSxFQUFFQTtZQUNQQSxLQUFLQSxFQUFFQSxFQUFFQTtZQUNUQSxLQUFLQSxFQUFFQSxHQUFHQTtZQUNWQSxNQUFNQSxFQUFFQSxFQUFFQTtZQUNWQSxDQUFDQSxFQUFFQSxFQUFFQTtZQUNMQSxFQUFFQSxFQUFFQSxHQUFHQTtZQUNQQSxHQUFHQSxFQUFFQSxHQUFHQTtZQUNSQSxHQUFHQSxFQUFFQSxHQUFHQTtZQUNSQSxHQUFHQSxFQUFFQSxHQUFHQTtZQUNSQSxFQUFFQSxFQUFFQSxHQUFHQTtZQUNQQSxFQUFFQSxFQUFFQSxHQUFHQTtZQUNQQSxFQUFFQSxFQUFFQSxHQUFHQTtZQUNQQSxFQUFFQSxFQUFFQSxHQUFHQTtZQUNQQSxFQUFFQSxFQUFFQSxHQUFHQTtZQUNQQSxFQUFFQSxFQUFFQSxHQUFHQTtZQUNQQSxFQUFFQSxFQUFFQSxHQUFHQTtZQUNQQSxFQUFFQSxFQUFFQSxHQUFHQTtZQUNQQSxDQUFDQSxFQUFFQSxFQUFFQTtZQUNMQSxDQUFDQSxFQUFFQSxFQUFFQTtZQUNMQSxJQUFJQSxFQUFFQSxFQUFFQTtZQUNSQSxDQUFDQSxFQUFFQSxFQUFFQTtZQUNMQSxNQUFNQSxFQUFFQSxFQUFFQTtZQUNWQSxDQUFDQSxFQUFFQSxFQUFFQTtZQUNMQSxDQUFDQSxFQUFFQSxFQUFFQTtZQUNMQSxDQUFDQSxFQUFFQSxFQUFFQTtZQUNMQSxJQUFJQSxFQUFFQSxFQUFFQTtZQUNSQSxXQUFXQSxFQUFFQSxHQUFHQTtZQUNoQkEsQ0FBQ0EsRUFBRUEsRUFBRUE7WUFDTEEsS0FBS0EsRUFBRUEsR0FBR0E7WUFDVkEsQ0FBQ0EsRUFBRUEsRUFBRUE7WUFDTEEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsRUFBRUE7WUFDWkEsUUFBUUEsRUFBRUEsR0FBR0E7WUFDYkEsUUFBUUEsRUFBRUEsR0FBR0E7WUFDYkEsUUFBUUEsRUFBRUEsR0FBR0E7WUFDYkEsUUFBUUEsRUFBRUEsR0FBR0E7WUFDYkEsUUFBUUEsRUFBRUEsR0FBR0E7WUFDYkEsUUFBUUEsRUFBRUEsR0FBR0E7WUFDYkEsVUFBVUEsRUFBRUEsR0FBR0E7WUFDZkEsY0FBY0EsRUFBRUEsR0FBR0E7WUFDbkJBLGFBQWFBLEVBQUVBLEdBQUdBO1lBQ2xCQSxlQUFlQSxFQUFFQSxHQUFHQTtZQUNwQkEsZUFBZUEsRUFBRUEsR0FBR0E7WUFDcEJBLFFBQVFBLEVBQUVBLEdBQUdBO1lBQ2JBLENBQUNBLEVBQUVBLEVBQUVBO1lBQ0xBLENBQUNBLEVBQUVBLEVBQUVBO1lBQ0xBLFNBQVNBLEVBQUVBLEVBQUVBO1lBQ2JBLE9BQU9BLEVBQUVBLEVBQUVBO1lBQ1hBLEtBQUtBLEVBQUVBLEVBQUVBO1lBQ1RBLE1BQU1BLEVBQUVBLEdBQUdBO1lBQ1hBLENBQUNBLEVBQUVBLEVBQUVBO1lBQ0xBLEtBQUtBLEVBQUVBLEdBQUdBO1lBQ1ZBLENBQUNBLEVBQUVBLEVBQUVBO1lBQ0xBLEtBQUtBLEVBQUVBLEVBQUVBO1lBQ1RBLFlBQVlBLEVBQUVBLEdBQUdBO1lBQ2pCQSxDQUFDQSxFQUFFQSxFQUFFQTtZQUNMQSxXQUFXQSxFQUFFQSxHQUFHQTtZQUNoQkEsTUFBTUEsRUFBRUEsRUFBRUE7WUFDVkEsU0FBU0EsRUFBRUEsR0FB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cG9ydCBTaW1wbGVTaWduYWwgZnJvbSAnLi8uLi9saWJzL3NpZ25hbHMvU2ltcGxlU2lnbmFsJztcclxuaW1wb3J0IEFjdGlvbiBmcm9tICcuL0FjdGlvbic7XHJcbmltcG9ydCBBeGlzIGZyb20gJy4vQXhpcyc7XHJcblxyXG4vKipcclxuICogUHJvdmlkZXMgdW5pdmVyc2FsIGlucHV0IGNvbnRyb2wgZm9yIGdhbWUgY29udHJvbGxlcnMgYW5kIGtleWJvYXJkXHJcbiAqIE1vcmUgaW5mbzogaHR0cHM6Ly9naXRodWIuY29tL3plaC9rZXktYWN0aW9uLWJpbmRlci50c1xyXG4gKlxyXG4gKiBAYXV0aG9yIHplaCBmZXJuYW5kb1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS2V5QWN0aW9uQmluZGVyIHtcclxuXHJcblx0Ly8gQ29uc3RhbnRzXHJcblx0cHVibGljIHN0YXRpYyBWRVJTSU9OOlN0cmluZyA9IFwiMS4wLjBcIjtcclxuXHJcblx0Ly8gRW51bXMgKEludGVybmFsKVxyXG5cdHB1YmxpYyBzdGF0aWMgS2V5Q29kZXMgPSB7XHJcblx0XHRBTlk6IDgxNjUzODEyLFxyXG5cdFx0QTogNjUsXHJcblx0XHRBTFQ6IDE4LFxyXG5cdFx0QjogNjYsXHJcblx0XHRCQUNLUVVPVEU6IDE5MixcclxuXHRcdEJBQ0tTTEFTSDogMjIwLFxyXG5cdFx0QkFDS1NQQUNFOiA4LFxyXG5cdFx0QzogNjcsXHJcblx0XHRDQVBTX0xPQ0s6IDIwLFxyXG5cdFx0Q09NTUE6IDE4OCxcclxuXHRcdENUUkw6IDE3LFxyXG5cdFx0RDogNjgsXHJcblx0XHRERUxFVEU6IDQ2LFxyXG5cdFx0RE9XTjogNDAsXHJcblx0XHRFOiA2OSxcclxuXHRcdEVORDogMzUsXHJcblx0XHRFTlRFUjogMTMsXHJcblx0XHRFUVVBTDogMTg3LFxyXG5cdFx0RVNDQVBFOiAyNyxcclxuXHRcdEY6IDcwLFxyXG5cdFx0RjE6IDExMixcclxuXHRcdEYxMDogMTIxLFxyXG5cdFx0RjExOiAxMjIsXHJcblx0XHRGMTI6IDEyMyxcclxuXHRcdEYyOiAxMTMsXHJcblx0XHRGMzogMTE0LFxyXG5cdFx0RjQ6IDExNSxcclxuXHRcdEY1OiAxMTYsXHJcblx0XHRGNjogMTE3LFxyXG5cdFx0Rjc6IDExOCxcclxuXHRcdEY4OiAxMTksXHJcblx0XHRGOTogMTIwLFxyXG5cdFx0RzogNzEsXHJcblx0XHRIOiA3MixcclxuXHRcdEhPTUU6IDM2LFxyXG5cdFx0STogNzMsXHJcblx0XHRJTlNFUlQ6IDQ1LFxyXG5cdFx0SjogNzQsXHJcblx0XHRLOiA3NSxcclxuXHRcdEw6IDc2LFxyXG5cdFx0TEVGVDogMzcsXHJcblx0XHRMRUZUQlJBQ0tFVDogMjE5LFxyXG5cdFx0TTogNzcsXHJcblx0XHRNSU5VUzogMTg5LFxyXG5cdFx0TjogNzgsXHJcblx0XHROVU1CRVJfMDogNDgsXHJcblx0XHROVU1CRVJfMTogNDksXHJcblx0XHROVU1CRVJfMjogNTAsXHJcblx0XHROVU1CRVJfMzogNTEsXHJcblx0XHROVU1CRVJfNDogNTIsXHJcblx0XHROVU1CRVJfNTogNTMsXHJcblx0XHROVU1CRVJfNjogNTQsXHJcblx0XHROVU1CRVJfNzogNTUsXHJcblx0XHROVU1CRVJfODogNTYsXHJcblx0XHROVU1CRVJfOTogNTcsXHJcblx0XHROVU1QQURfMDogOTYsXHJcblx0XHROVU1QQURfMTogOTcsXHJcblx0XHROVU1QQURfMjogOTgsXHJcblx0XHROVU1QQURfMzogOTksXHJcblx0XHROVU1QQURfNDogMTAwLFxyXG5cdFx0TlVNUEFEXzU6IDEwMSxcclxuXHRcdE5VTVBBRF82OiAxMDIsXHJcblx0XHROVU1QQURfNzogMTAzLFxyXG5cdFx0TlVNUEFEXzg6IDEwNCxcclxuXHRcdE5VTVBBRF85OiAxMDUsXHJcblx0XHROVU1QQURfQUREOiAxMDcsXHJcblx0XHROVU1QQURfREVDSU1BTDogMTEwLFxyXG5cdFx0TlVNUEFEX0RJVklERTogMTExLFxyXG5cdFx0TlVNUEFEX01VTFRJUExZOiAxMDYsXHJcblx0XHROVU1QQURfU1VCVFJBQ1Q6IDEwOSxcclxuXHRcdE5VTV9MT0NLOiAxNDQsXHJcblx0XHRPOiA3OSxcclxuXHRcdFA6IDgwLFxyXG5cdFx0UEFHRV9ET1dOOiAzNCxcclxuXHRcdFBBR0VfVVA6IDMzLFxyXG5cdFx0UEFVU0U6IDE5LFxyXG5cdFx0UEVSSU9EOiAxOTAsXHJcblx0XHRROiA4MSxcclxuXHRcdFFVT1RFOiAyMjIsXHJcblx0XHRSOiA4MixcclxuXHRcdFJJR0hUOiAzOSxcclxuXHRcdFJJR0hUQlJBQ0tFVDogMjIxLFxyXG5cdFx0UzogODMsXHJcblx0XHRTQ1JPTExfTE9DSzogMTQ1LCAvLyBUZXN0XHJcblx0XHRTRUxFQ1Q6IDkzLCAvLyBNZW51IGluIHdpbmRvd3NcclxuXHRcdFNFTUlDT0xPTjogMTg2LFxyXG5cdFx0U0hJRlQ6IDE2LFxyXG5cdFx0U0xBU0g6IDE5MSxcclxuXHRcdFNQQUNFOiAzMixcclxuXHRcdFQ6IDg0LFxyXG5cdFx0VEFCOiA5LFxyXG5cdFx0VTogODUsXHJcblx0XHRVUDogMzgsXHJcblx0XHRWOiA4NixcclxuXHRcdFc6IDg3LFxyXG5cdFx0V0lORE9XU19MRUZUOiA5MSxcclxuXHRcdFdJTkRPV1NfUklHSFQ6IDkyLFxyXG5cdFx0WDogODgsXHJcblx0XHRZOiA4OSxcclxuXHRcdFo6IDkwXHJcblx0fTtcclxuXHJcblx0cHVibGljIHN0YXRpYyBLZXlMb2NhdGlvbnMgPSB7XHJcblx0XHRBTlk6IDgxNjUzODEzLFxyXG5cdFx0U1RBTkRBUkQ6IDAsXHJcblx0XHRMRUZUOiAxLFxyXG5cdFx0UklHSFQ6IDIsXHJcblx0XHROVU1QQUQ6IDMsXHJcblx0fTtcclxuXHJcblx0cHVibGljIHN0YXRpYyBHYW1lcGFkTG9jYXRpb25zID0ge1xyXG5cdFx0QU5ZOiA4MTY1MzgxNCxcclxuXHR9O1xyXG5cclxuXHRwdWJsaWMgc3RhdGljIEdhbWVwYWRCdXR0b25zID0ge1xyXG5cdFx0QU5ZOiB7aW5kZXg6IDgxNjUzODE1fSxcclxuXHRcdEFDVElPTl9ET1dOOiB7aW5kZXg6IDB9LFxyXG5cdFx0QUNUSU9OX1JJR0hUOiB7aW5kZXg6IDF9LFxyXG5cdFx0QUNUSU9OX0xFRlQ6IHtpbmRleDogMn0sXHJcblx0XHRBQ1RJT05fVVA6IHtpbmRleDogM30sXHJcblx0XHRMRUZUX1NIT1VMREVSOiB7aW5kZXg6IDR9LCAvLyBMZWZ0IHNob3VsZGVyIGJ1dHRvblxyXG5cdFx0UklHSFRfU0hPVUxERVI6IHtpbmRleDogNX0sXHJcblx0XHRMRUZUX1NIT1VMREVSX0JPVFRPTToge2luZGV4OiA2fSwgLy8gTGVmdCBUcmlnZ2VyXHJcblx0XHRSSUdIVF9TSE9VTERFUl9CT1RUT006IHtpbmRleDogN30sXHJcblx0XHRTRUxFQ1Q6IHtpbmRleDogOH0sXHJcblx0XHRTVEFSVDoge2luZGV4OiA5fSxcclxuXHRcdFNUSUNLX0xFRlRfUFJFU1M6IHtpbmRleDogMTB9LFxyXG5cdFx0U1RJQ0tfUklHSFRfUFJFU1M6IHtpbmRleDogMTF9LFxyXG5cdFx0RFBBRF9VUDoge2luZGV4OiAxMn0sXHJcblx0XHREUEFEX0RPV046IHtpbmRleDogMTN9LFxyXG5cdFx0RFBBRF9MRUZUOiB7aW5kZXg6IDE0fSxcclxuXHRcdERQQURfUklHSFQ6IHtpbmRleDogMTV9XHJcblx0fTtcclxuXHJcblx0cHVibGljIHN0YXRpYyBHYW1lcGFkQXhlcyA9IHtcclxuXHRcdFNUSUNLX0xFRlRfWDoge2luZGV4OiAwfSxcclxuXHRcdFNUSUNLX0xFRlRfWToge2luZGV4OiAxfSxcclxuXHRcdFNUSUNLX1JJR0hUX1g6IHtpbmRleDogMn0sXHJcblx0XHRTVElDS19SSUdIVF9ZOiB7aW5kZXg6IDN9XHJcblx0fVxyXG5cclxuXHQvLyBQcm9wZXJ0aWVzXHJcblx0cHJpdmF0ZSBfaXNSdW5uaW5nOmJvb2xlYW47XHJcblx0cHJpdmF0ZSBfbWFpbnRhaW5QbGF5ZXJQb3NpdGlvbnM6Ym9vbGVhbjtcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gV2hldGhlciBpdCB0cmllcyB0byBrZWVwIHBsYXllciBwb3NpdGlvbnMgb3Igbm90XHJcblx0cHJpdmF0ZSBfcmVjZW50RGV2aWNlOkdhbWVwYWQ7XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRoZSBtb3N0IHJlY2VudCBkZXZpY2UgdGhhdCBzZW50IGFuIGV2ZW50IC8vIFRPRE86IHByb3Blcmx5IHVzZSB0aGlzLCBkdWhcclxuXHJcblx0Ly8gSW5zdGFuY2VzXHJcblx0cHJpdmF0ZSBhY3Rpb25zOnsgW2luZGV4OnN0cmluZ106QWN0aW9uIH07XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBbGwgYWRkZWQgYWN0aW9ucywgYXMgYSBkaWN0aW9uYXJ5XHJcblx0cHJpdmF0ZSBheGVzOnsgW2luZGV4OnN0cmluZ106QXhpcyB9O1x0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBbGwgYWRkZWQgYXhpcywgYXMgYSBkaWN0aW9uYXJ5XHJcblxyXG5cdHByaXZhdGUgX29uQWN0aW9uQWN0aXZhdGVkOlNpbXBsZVNpZ25hbDwoYWN0aW9uOnN0cmluZykgPT4gdm9pZD47XHRcdFx0Ly8gVE9ETzogcHJvcGVybHkgaW1wb3J0IG1vZHVsZXMgdG8gYXZvaWQgdXNpbmcgdGhlIHdob2xlIGlkZW50aWZpZXI/XHJcblx0cHJpdmF0ZSBfb25BY3Rpb25EZWFjdGl2YXRlZDpTaW1wbGVTaWduYWw8KGFjdGlvbjpzdHJpbmcpID0+IHZvaWQ+O1xyXG5cdHByaXZhdGUgX29uQWN0aW9uVmFsdWVDaGFuZ2VkOlNpbXBsZVNpZ25hbDwoYWN0aW9uOnN0cmluZywgdmFsdWU6bnVtYmVyKSA9PiB2b2lkPjtcclxuXHRwcml2YXRlIF9vbkRldmljZXNDaGFuZ2VkOlNpbXBsZVNpZ25hbDwoKSA9PiB2b2lkPjtcclxuXHRwcml2YXRlIF9vblJlY2VudERldmljZUNoYW5nZWQ6U2ltcGxlU2lnbmFsPChnYW1lcGFkOkdhbWVwYWQpID0+IHZvaWQ+OyAvLyBUT0RPOiB1c2UgYSBHYW1lcGFkIHdyYXBwZXI/XHJcblxyXG5cdHByaXZhdGUgYmluZENhY2hlOmFueTtcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFNob3VsZCBoYXZlIGJlZW4gXCJ7IFtpbmRleDogRnVuY3Rpb25dOiBGdW5jdGlvbiB9XCIsIGJ1dCB0aGF0J3Mgbm90IGFsbG93ZWQuLiBtYXliZSBjcmVhdGUgYSBzZXBhcmF0ZSBjbGFzcyBsYXRlclxyXG5cclxuXHRwcml2YXRlIGN1cnJlbnRGcmFtZTpudW1iZXI7XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFVzZWQgdG8gY291bnQgdXBkYXRlIGNoZWNrc1xyXG5cdHByaXZhdGUgbGFzdEZyYW1lR2FtZXBhZHNDaGVja2VkOm51bWJlcjtcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gTGFzdCBmcmFtZSB3aGVyZSBnYW1lcGFkIGlucHV0IHdhcyBjaGVja2VkXHJcblxyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0Ly8gQ09OU1RSVUNUT1IgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuYmluZENhY2hlID0ge307XHJcblxyXG5cdFx0dGhpcy5faXNSdW5uaW5nID0gZmFsc2U7XHJcblx0XHR0aGlzLl9tYWludGFpblBsYXllclBvc2l0aW9ucyA9IGZhbHNlO1xyXG5cdFx0dGhpcy5hY3Rpb25zID0ge307XHJcblx0XHR0aGlzLmF4ZXMgPSB7fTtcclxuXHJcblx0XHR0aGlzLl9vbkFjdGlvbkFjdGl2YXRlZCA9IG5ldyBTaW1wbGVTaWduYWw8KGFjdGlvbjpzdHJpbmcpID0+IHZvaWQ+KCk7XHJcblx0XHR0aGlzLl9vbkFjdGlvbkRlYWN0aXZhdGVkID0gbmV3IFNpbXBsZVNpZ25hbDwoYWN0aW9uOnN0cmluZykgPT4gdm9pZD4oKTtcclxuXHRcdHRoaXMuX29uQWN0aW9uVmFsdWVDaGFuZ2VkID0gbmV3IFNpbXBsZVNpZ25hbDwoYWN0aW9uOnN0cmluZywgdmFsdWU6bnVtYmVyKSA9PiB2b2lkPigpO1xyXG5cdFx0dGhpcy5fb25EZXZpY2VzQ2hhbmdlZCA9IG5ldyBTaW1wbGVTaWduYWw8KCkgPT4gdm9pZD4oKTtcclxuXHRcdHRoaXMuX29uUmVjZW50RGV2aWNlQ2hhbmdlZCA9IG5ldyBTaW1wbGVTaWduYWw8KGdhbWVwYWQ6R2FtZXBhZCkgPT4gdm9pZD4oKTtcclxuXHJcblx0XHR0aGlzLmN1cnJlbnRGcmFtZSA9IDA7XHJcblx0XHR0aGlzLmxhc3RGcmFtZUdhbWVwYWRzQ2hlY2tlZCA9IDA7XHJcblxyXG5cdFx0dGhpcy5zdGFydCgpO1xyXG5cdH1cclxuXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIFBVQkxJQyBJTlRFUkZBQ0UgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0LyoqXHJcblx0ICogU3RhcnRzIGxpc3RlbmluZyBmb3IgaW5wdXQgZXZlbnRzLlxyXG5cdCAqXHJcblx0ICogPHA+VGhpcyBoYXBwZW5zIGJ5IGRlZmF1bHQgd2hlbiBhIEtleUFjdGlvbkJpbmRlciBvYmplY3QgaXMgaW5zdGFudGlhdGVkOyB0aGlzIG1ldGhvZCBpcyBvbmx5IHVzZWZ1bCBpZlxyXG5cdCAqIGNhbGxlZCBhZnRlciA8Y29kZT5zdG9wKCk8L2NvZGU+IGhhcyBiZWVuIHVzZWQuPC9wPlxyXG5cdCAqXHJcblx0ICogPHA+Q2FsbGluZyB0aGlzIG1ldGhvZCB3aGVuIGEgS2V5QWN0aW9uQmluZGVyIGluc3RhbmNlIGlzIGFscmVhZHkgcnVubmluZyBoYXMgbm8gZWZmZWN0LjwvcD5cclxuXHQgKlxyXG5cdCAqIEBzZWUgI2lzUnVubmluZ1xyXG5cdCAqIEBzZWUgI3N0b3AoKVxyXG5cdCAqL1xyXG5cdHB1YmxpYyBzdGFydCgpOnZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLl9pc1J1bm5pbmcpIHtcclxuXHRcdFx0Ly8gU3RhcnRzIGxpc3RlbmluZyB0byBrZXlib2FyZCBldmVudHNcclxuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuZ2V0Qm91bmRGdW5jdGlvbih0aGlzLm9uS2V5RG93bikpO1xyXG5cdFx0XHQvL3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgdGhpcy5nZXRCb3VuZEZ1bmN0aW9uKHRoaXMub25LZXlEb3duKSk7IC8vIHRoaXMgZmlyZXMgd2l0aCBjb21wbGV0ZWx5IHVucmVsYXRlZCBrZXkgY29kZXM7IFRPRE86IGludmVzdGlnYXRlIHdoeVxyXG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuZ2V0Qm91bmRGdW5jdGlvbih0aGlzLm9uS2V5VXApKTtcclxuXHJcblx0XHRcdC8vIFN0YXJ0cyBsaXN0ZW5pbmcgdG8gZGV2aWNlIGNoYW5nZSBldmVudHNcclxuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lcGFkY29ubmVjdGVkXCIsIHRoaXMuZ2V0Qm91bmRGdW5jdGlvbih0aGlzLm9uR2FtZXBhZEFkZGVkKSk7XHJcblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZ2FtZXBhZGRpc2Nvbm5lY3RlZFwiLCB0aGlzLmdldEJvdW5kRnVuY3Rpb24odGhpcy5vbkdhbWVwYWRSZW1vdmVkKSk7XHJcblxyXG5cdFx0XHR0aGlzLnJlZnJlc2hHYW1lcGFkTGlzdCgpO1xyXG5cclxuXHRcdFx0dGhpcy5faXNSdW5uaW5nID0gdHJ1ZTtcclxuXHJcblx0XHRcdHRoaXMuaW5jcmVtZW50RnJhbWVDb3VudCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU3RvcHMgbGlzdGVuaW5nIGZvciBpbnB1dCBldmVudHMuXHJcblx0ICpcclxuXHQgKiA8cD5BY3Rpb24gYmluZGluZ3MgYXJlIG5vdCBsb3N0IHdoZW4gYSBLZXlBY3Rpb25CaW5kZXIgaW5zdGFuY2UgaXMgc3RvcHBlZDsgaXQgbWVyZWx5IHN0YXJ0cyBpZ25vcmluZ1xyXG5cdCAqIGFsbCBpbnB1dCBldmVudHMsIHVudGlsIDxjb2RlPnN0YXJ0KCk8Y29kZT4gaXMgY2FsbGVkIGFnYWluLjwvcD5cclxuXHQgKlxyXG5cdCAqIDxwPlRoaXMgbWV0aG9kIHNob3VsZCBhbHdheXMgYmUgY2FsbGVkIHdoZW4geW91IGRvbid0IG5lZWQgYSBLZXlBY3Rpb25CaW5kZXIgaW5zdGFuY2UgYW55bW9yZSwgb3RoZXJ3aXNlXHJcblx0ICogaXQnbGwgYmUgbGlzdGVuaW5nIHRvIGV2ZW50cyBpbmRlZmluaXRlbHkuPC9wPlxyXG5cdCAqXHJcblx0ICogPHA+Q2FsbGluZyB0aGlzIG1ldGhvZCB3aGVuIHRoaXMgYSBLZXlBY3Rpb25CaW5kZXIgaW5zdGFuY2UgaXMgYWxyZWFkeSBzdG9wcGVkIGhhcyBubyBlZmZlY3QuPC9wPlxyXG5cdCAqXHJcblx0ICogQHNlZSAjaXNSdW5uaW5nXHJcblx0ICogQHNlZSAjc3RhcnQoKVxyXG5cdCAqL1xyXG5cdHB1YmxpYyBzdG9wKCk6dm9pZCB7XHJcblx0XHRpZiAodGhpcy5faXNSdW5uaW5nKSB7XHJcblx0XHRcdC8vIFN0b3BzIGxpc3RlbmluZyB0byBrZXlib2FyZCBldmVudHNcclxuXHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuZ2V0Qm91bmRGdW5jdGlvbih0aGlzLm9uS2V5RG93bikpO1xyXG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuZ2V0Qm91bmRGdW5jdGlvbih0aGlzLm9uS2V5VXApKTtcclxuXHJcblx0XHRcdC8vIFN0b3BzIGxpc3RlbmluZyB0byBkZXZpY2UgY2hhbmdlIGV2ZW50c1xyXG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImdhbWVwYWRjb25uZWN0ZWRcIiwgdGhpcy5nZXRCb3VuZEZ1bmN0aW9uKHRoaXMub25HYW1lcGFkQWRkZWQpKTtcclxuXHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJnYW1lcGFkZGlzY29ubmVjdGVkXCIsIHRoaXMuZ2V0Qm91bmRGdW5jdGlvbih0aGlzLm9uR2FtZXBhZFJlbW92ZWQpKTtcclxuXHJcblx0XHRcdHRoaXMuX2lzUnVubmluZyA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyBhbiBhY3Rpb24gaW5zdGFuY2UsIGNyZWF0aW5nIGl0IGlmIG5lY2Vzc2FyeVxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhY3Rpb24oaWQ6c3RyaW5nKTpBY3Rpb24ge1xyXG5cdFx0Ly8gQ2hlY2sgZ2FtZXBhZCBzdGF0ZVxyXG5cdFx0aWYgKHRoaXMubGFzdEZyYW1lR2FtZXBhZHNDaGVja2VkIDwgdGhpcy5jdXJyZW50RnJhbWUpIHRoaXMudXBkYXRlR2FtZXBhZHNTdGF0ZSgpO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBBY3Rpb24gZmlyc3QgaWYgbmVlZGVkXHJcblx0XHRpZiAoIXRoaXMuYWN0aW9ucy5oYXNPd25Qcm9wZXJ0eShpZCkpIHRoaXMuYWN0aW9uc1tpZF0gPSBuZXcgQWN0aW9uKGlkKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5hY3Rpb25zW2lkXTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgYW4gYXhpcyBpbnN0YW5jZSwgY3JlYXRpbmcgaXQgaWYgbmVjZXNzYXJ5XHJcblx0ICovXHJcblx0cHVibGljIGF4aXMoaWQ6c3RyaW5nKTpBeGlzIHtcclxuXHRcdC8vIENoZWNrIGdhbWVwYWQgc3RhdGVcclxuXHRcdGlmICh0aGlzLmxhc3RGcmFtZUdhbWVwYWRzQ2hlY2tlZCA8IHRoaXMuY3VycmVudEZyYW1lKSB0aGlzLnVwZGF0ZUdhbWVwYWRzU3RhdGUoKTtcclxuXHJcblx0XHQvLyBDcmVhdGUgQXhpcyBmaXJzdCBpZiBuZWVkZWRcclxuXHRcdGlmICghdGhpcy5heGVzLmhhc093blByb3BlcnR5KGlkKSkgdGhpcy5heGVzW2lkXSA9IG5ldyBBeGlzKGlkKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5heGVzW2lkXTtcclxuXHR9XHJcblxyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0Ly8gQUNDRVNTT1IgSU5URVJGQUNFIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHRwdWJsaWMgZ2V0IG9uQWN0aW9uQWN0aXZhdGVkKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX29uQWN0aW9uQWN0aXZhdGVkO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldCBvbkFjdGlvbkRlYWN0aXZhdGVkKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX29uQWN0aW9uRGVhY3RpdmF0ZWQ7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0IG9uQWN0aW9uVmFsdWVDaGFuZ2VkKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX29uQWN0aW9uVmFsdWVDaGFuZ2VkO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldCBvbkRldmljZXNDaGFuZ2VkKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX29uRGV2aWNlc0NoYW5nZWQ7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0IG9uUmVjZW50RGV2aWNlQ2hhbmdlZCgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9vblJlY2VudERldmljZUNoYW5nZWQ7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBXaGV0aGVyIHRoaXMgS2V5QWN0aW9uQmluZGVyIGluc3RhbmNlIGlzIHJ1bm5pbmcsIG9yIG5vdC4gVGhpcyBwcm9wZXJ0eSBpcyByZWFkLW9ubHkuXHJcblx0ICpcclxuXHQgKiBAc2VlICNzdGFydCgpXHJcblx0ICogQHNlZSAjc3RvcCgpXHJcblx0ICovXHJcblx0cHVibGljIGdldCBpc1J1bm5pbmcoKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5faXNSdW5uaW5nO1xyXG5cdH1cclxuXHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyBFVkVOVCBJTlRFUkZBQ0UgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdHByaXZhdGUgb25LZXlEb3duKGU6S2V5Ym9hcmRFdmVudCk6dm9pZCB7XHJcblx0XHRmb3IgKHZhciBpaXMgaW4gdGhpcy5hY3Rpb25zKSB0aGlzLmFjdGlvbnNbaWlzXS5pbnRlcnByZXRLZXlEb3duKGUua2V5Q29kZSwgZS5sb2NhdGlvbik7XHJcblx0XHRmb3IgKHZhciBpaXMgaW4gdGhpcy5heGVzKSB0aGlzLmF4ZXNbaWlzXS5pbnRlcnByZXRLZXlEb3duKGUua2V5Q29kZSwgZS5sb2NhdGlvbik7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG9uS2V5VXAoZTpLZXlib2FyZEV2ZW50KTp2b2lkIHtcclxuXHRcdGZvciAodmFyIGlpcyBpbiB0aGlzLmFjdGlvbnMpIHRoaXMuYWN0aW9uc1tpaXNdLmludGVycHJldEtleVVwKGUua2V5Q29kZSwgZS5sb2NhdGlvbik7XHJcblx0XHRmb3IgKHZhciBpaXMgaW4gdGhpcy5heGVzKSB0aGlzLmF4ZXNbaWlzXS5pbnRlcnByZXRLZXlVcChlLmtleUNvZGUsIGUubG9jYXRpb24pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBvbkdhbWVwYWRBZGRlZChlOkdhbWVwYWRFdmVudCk6dm9pZCB7XHJcblx0XHR0aGlzLnJlZnJlc2hHYW1lcGFkTGlzdCgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBvbkdhbWVwYWRSZW1vdmVkKGU6R2FtZXBhZEV2ZW50KTp2b2lkIHtcclxuXHRcdHRoaXMucmVmcmVzaEdhbWVwYWRMaXN0KCk7XHJcblx0fVxyXG5cclxuXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIFBSSVZBVEUgSU5URVJGQUNFIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0cHJpdmF0ZSBpbmNyZW1lbnRGcmFtZUNvdW50KCk6dm9pZCB7XHJcblx0XHRpZiAodGhpcy5faXNSdW5uaW5nKSB7XHJcblx0XHRcdHRoaXMuY3VycmVudEZyYW1lKys7XHJcblx0XHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5pbmNyZW1lbnRGcmFtZUNvdW50LmJpbmQodGhpcykpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIHRoZSBrbm93biBzdGF0ZSBvZiBhbGwgYnV0dG9ucy9heGlzXHJcblx0ICovXHJcblx0cHVibGljIHVwZGF0ZUdhbWVwYWRzU3RhdGUoKTp2b2lkIHtcclxuXHRcdC8vY29uc29sZS50aW1lKFwiY2hlY2tcIik7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgYWxsIGJ1dHRvbnMgb2YgYWxsIGdhbWVwYWRzXHJcblx0XHR2YXIgZ2FtZXBhZHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKTtcclxuXHRcdHZhciBnYW1lcGFkOkdhbWVwYWQ7XHJcblx0XHR2YXIgaTpudW1iZXIsIGo6bnVtYmVyLCBsOm51bWJlcjtcclxuXHRcdHZhciBhY3Rpb246QWN0aW9uO1xyXG5cdFx0dmFyIGJ1dHRvbnM6R2FtZXBhZEJ1dHRvbltdO1xyXG5cdFx0dmFyIGF4aXM6QXhpcztcclxuXHRcdHZhciBheGVzOm51bWJlcltdO1xyXG5cclxuXHRcdC8vIEZvciBhbGwgZ2FtZXBhZHMuLi5cclxuXHRcdGZvciAoaSA9IDA7IGkgPCBnYW1lcGFkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRnYW1lcGFkID0gZ2FtZXBhZHNbaV07XHJcblx0XHRcdGlmIChnYW1lcGFkICE9IG51bGwpIHtcclxuXHRcdFx0XHQvLyAuLmFuZCBhbGwgYWN0aW9ucy4uLlxyXG5cdFx0XHRcdGZvciAodmFyIGlpcyBpbiB0aGlzLmFjdGlvbnMpIHtcclxuXHRcdFx0XHRcdGFjdGlvbiA9IHRoaXMuYWN0aW9uc1tpaXNdO1xyXG5cclxuXHRcdFx0XHRcdC8vIC4uLmludGVycHJldCBhbGwgZ2FtZXBhZCBidXR0b25zXHJcblx0XHRcdFx0XHRidXR0b25zID0gZ2FtZXBhZC5idXR0b25zO1xyXG5cdFx0XHRcdFx0bCA9IGJ1dHRvbnMubGVuZ3RoO1xyXG5cdFx0XHRcdFx0Zm9yIChqID0gMDsgaiA8IGw7IGorKykge1xyXG5cdFx0XHRcdFx0XHRhY3Rpb24uaW50ZXJwcmV0R2FtZXBhZEJ1dHRvbihqLCBpLCBidXR0b25zW2pdLnByZXNzZWQsIGJ1dHRvbnNbal0udmFsdWUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gQW5kIGluIGFsbCBheGVzLi4uXHJcblx0XHRcdFx0Zm9yICh2YXIgaWlzIGluIHRoaXMuYXhlcykge1xyXG5cdFx0XHRcdFx0YXhpcyA9IHRoaXMuYXhlc1tpaXNdO1xyXG5cclxuXHRcdFx0XHRcdC8vIC4uLmFuZCBhbGwgZ2FtZXBhZCBheGVzXHJcblx0XHRcdFx0XHRheGVzID0gZ2FtZXBhZC5heGVzO1xyXG5cdFx0XHRcdFx0bCA9IGF4ZXMubGVuZ3RoO1xyXG5cdFx0XHRcdFx0Zm9yIChqID0gMDsgaiA8IGw7IGorKykge1xyXG5cdFx0XHRcdFx0XHRheGlzLmludGVycHJldEdhbWVwYWRBeGlzKGosIGksIGF4ZXNbal0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMubGFzdEZyYW1lR2FtZXBhZHNDaGVja2VkID0gdGhpcy5jdXJyZW50RnJhbWU7XHJcblxyXG5cdFx0Ly9jb25zb2xlLnRpbWVFbmQoXCJjaGVja1wiKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVmcmVzaEdhbWVwYWRMaXN0KCk6dm9pZCB7XHJcblx0XHQvLyBUaGUgbGlzdCBvZiBnYW1lIGRldmljZXMgaGFzIGNoYW5nZWRcclxuXHJcblx0XHQvLyBUT0RPOiBpbXBsZW1lbnQgX21haW50YWluUGxheWVyUG9zaXRpb25zID8gQXBwYXJlbnRseSB0aGUgYnJvd3NlciBhbHJlYWR5IGRvZXMgc29tZXRoaW5nIGxpa2UgdGhhdC4uLlxyXG5cdFx0Ly9jb25zb2xlLmxvZyhcIkxpc3Qgb2YgZ2FtZXBhZHMgcmVmcmVzaGVkLCBuZXcgbGlzdCA9IFwiICsgbmF2aWdhdG9yLmdldEdhbWVwYWRzKCkubGVuZ3RoICsgXCIgaXRlbXNcIik7XHJcblxyXG5cdFx0Ly8gRGlzcGF0Y2ggdGhlIHNpZ25hbFxyXG5cdFx0dGhpcy5fb25EZXZpY2VzQ2hhbmdlZC5kaXNwYXRjaCgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXRpbGl0eSBmdW5jdGlvbjogY3JlYXRlcyBhIGZ1bmN0aW9uIGJvdW5kIHRvIFwidGhpc1wiLlxyXG5cdCAqIFRoaXMgbmVlZHMgdG8gYmUgc3RvcmVkIGJlY2F1c2UgdGhlIHNhbWUgcmVmZXJlbmNlIG5lZWRzIHRvIGJlIHVzZWQgd2hlbiByZW1vdmluZyBsaXN0ZW5lcnMuXHJcblx0ICovXHJcblx0cHJpdmF0ZSBnZXRCb3VuZEZ1bmN0aW9uKGZ1bmM6YW55KTogRXZlbnRMaXN0ZW5lciB7XHJcblx0XHRpZiAoIXRoaXMuYmluZENhY2hlLmhhc093blByb3BlcnR5KGZ1bmMpKSB7XHJcblx0XHRcdHRoaXMuYmluZENhY2hlW2Z1bmNdID0gZnVuYy5iaW5kKHRoaXMpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRoaXMuYmluZENhY2hlW2Z1bmNdO1xyXG5cdH1cclxufVxyXG5cclxuLy8gQ3JlYXRlIGEgZ2xvYmFsIG9iamVjdCB3aXRoIHRoZSBjbGFzcyAtIG9ubHkgdXNlZCBpbiB0aGUgc2luZ2xlIGZpbGUgdmVyc2lvbiwgcmVwbGFjZWQgYXQgYnVpbGQgdGltZVxyXG4vLyAjSUZERUYgRVM1U0lOR0xFIC8vIHdpbmRvd1tcIktleUFjdGlvbkJpbmRlclwiXSA9IEtleUFjdGlvbkJpbmRlcjtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9